# LightAccounting开发文档

**代码总量：**1415行

## 记账软件设计思路

概述：希望设计一款界面简洁、功能齐全，用于日常生活记账统计的APP。

### 需求分析

**记账需求：**

1. 单笔记账：记录单笔支出、收入、账户间转账、借贷的相关数据项
2. 周期记账：定时生成账目数据，用于满足定期扣费的需求

|  ID  |  金额（元）  | 支出时间 |       支出账户       |       转入账户       | 支出类型 |           账目属性           |       循环周期       |  备注  |
| :--: | :----------: | :------: | :------------------: | :------------------: | :------: | :--------------------------: | :------------------: | :----: |
| int  | 保留两位小数 | 年月日时 | 微信、支付宝、银行卡 | 微信、支付宝、银行卡 | 衣食住行 | 支出、收入、借贷、账户间转账 | null、年、月、周、日 | string |

**统计显示：**

1. 近期交易流水一览，按时间顺序显示最近几日的交易流水
2. 按年月周日显示收支情况（显示收支曲线，显示收支正负）
3. 按支出类型显示不同支出类型的支出占比
4. 显示总资产以及具体账户资产
5. 统计借贷款项（点击可查看具体借贷款项信息）
6. 年月日度预算统计

**预算设置：**

1. 设置年月日度总预算
2. 设置不同类别项目的预算

### 页面设计

**启动页：**

文件名：SplashPage

进入方法：点击APP图标，启动APP时首先进入此页面，停留一段时间后消失。

页面功能：本页面将显示APP启动页面，停滞几秒后跳转进入主页面，如果是首次启动APP则弹出权限申请弹窗，用户选择确认按钮后停滞几秒进入首页，点击取消则退出APP。

组件：

1. APP图标
2. APP名称（中英文）
3. 背景图片
4. 权限申请弹窗组件

**首页：**

文件名：MainPage

进入方法：启动页消失后自动转入首页，页面中包含子页面以及子页面的共同组件。

页面功能：实现菜单栏的切换。

组件：

1. 菜单栏
2. 三个子页面。

**记账页：**

文件名：AccountingPage

进入方法：默认显示页面，点击菜单栏左侧选项可进入。

页面功能：本页面将完成记账需求，方便用户在启动APP时可以最快速记录账目。

组件：

1. 数字输入框（简易计算器）
2. 数字键盘（简易计算器）
3. 类型选择框（文本选择框，可选项固定）
4. 账目属性选择框（文本选择框，可选项可变）
5. 时间选择框（默认为当前时间）
6. 备注栏输入框

**统计页：**

文件名：StatisticsPage

进入方法：向右滑动进入此页面，或者点击菜单栏中间选项可进入。

页面功能：本页面将展示各类统计数据，方便用户查看收支、占比、资产、预算等相关数据。

**统计页 - 预算设置页：**

文件名：BudgetPage

进入方法：在统计页中的预算处点击进入设置页面。

页面功能：设置年月日度总预算以及不同类别项目的预算。

**流水细则页：**

文件名：DetailsPage

进入方法：再次向右滑动进入此页面，或者点击菜单栏右侧选项可进入。

页面功能：本页面将以列表的形式详细展示近期的账目流水。

### 全局常量设置

### 数据结构设计

## 开发日志

SDK版本：API 8

### 问题1：

**情境：**当用户点击弹窗中的取消选项时，启动页面销毁，程序退出。

**暂时的解决方案：**当点击取消选项的时候，调用exitApp()函数。

```
exitApp() {
  console.info("程序退出啦！！！")
  featureAbility.terminateSelf()
}
```

**问题：**featureAbility.terminateSelf()的确实现了页面销毁的功能，但是是如何跟当前页面绑定的呢，还是说这个函数的功能只是销毁了当前活跃着的FA？FA同时可以有多个活跃吗？

**最终解决方案：**暂无。

### 问题2：

**情境：**当在主菜单页面切换横竖屏状态时，会返回到刷新页面。

**解决方案：**暂无
